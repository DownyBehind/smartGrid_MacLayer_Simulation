# HPGP SLAC Simulation Configuration
# Based on simulator_simpleAndQuick/config/defaults.json

[General]
# Basic simulation settings
network = HpgpNetwork
sim-time-limit = 30s
warmup-period = 1s

# Random number generation
seed-set = ${0..9}

# Result collection
output-vector-file = results/slac-${configname}-${runnumber}.vec
output-scalar-file = results/slac-${configname}-${runnumber}.sca
record-eventlog = false

# Logging
**.cmdenv-log-level = INFO
**.log-level = DEBUG

[Config Base]
# Network parameters - based on defaults.json
*.numNodes = ${numNodes = 5, 10, 15, 20}

# Configure PLC physical layer
*.plcRadioMedium.typename = "PLCRadioMedium"
*.plcRadioMedium.backgroundNoise.power = -100dBm
*.plcRadioMedium.propagation.typename = "PLCPropagation"

# Node configuration
**.node[*].numApps = 1
**.node[*].app[0].typename = "SlacApplication"

# SLAC Application parameters (from defaults.json)
**.node[*].app[0].localPort = 8999
**.node[*].app[0].destPort = 8999
**.node[*].app[0].slacMsgTimeout = 1.0s
**.node[*].app[0].slacProcTimeout = 10.0s
**.node[*].app[0].slacMaxRetry = 3
**.node[*].app[0].slacRetryBackoff = 0.5s

# IEEE1901 MAC parameters
**.node[*].ieee1901Interface.mac.typename = "IEEE1901Mac"
**.node[*].ieee1901Interface.mac.backoffMethod = "exponential"
**.node[*].ieee1901Interface.mac.maxBackoffStage = 5
**.node[*].ieee1901Interface.mac.retryLimit = 3

# IEEE1901 PHY parameters
**.node[*].ieee1901Interface.phy.typename = "IEEE1901Phy"
**.node[*].ieee1901Interface.phy.transmitter.power = 10mW
**.node[*].ieee1901Interface.phy.transmitter.bitrate = 10Mbps
**.node[*].ieee1901Interface.phy.receiver.sensitivity = -85dBm

# EVSE configuration - node[0] is always EVSE
**.node[0].app[0].nodeType = "EVSE"
**.node[0].app[0].nodeId = 0

# EV configuration - remaining nodes are EVs
**.node[1..].app[0].nodeType = "EV"
**.node[*].app[0].nodeId = index

# Statistics collection
**.slacCompletionTime.statistic-recording = true
**.slacRetryCount.statistic-recording = true
**.slacTimeout.statistic-recording = true

# Vector recording for detailed analysis
**.node[*].app[0].slacCompletionTime.result-recording-modes = all
**.node[*].app[0].slacRetryCount.result-recording-modes = all

[Config SingleEVSE]
description = "Single EVSE with multiple EVs - baseline scenario"
extends = Base

[Config ConcurrentEVSE]
description = "Multiple EVSEs with multiple EVs - concurrent SLAC scenario"
extends = Base
# Override: make first half nodes EVSEs, second half EVs
**.node[0..${numNodes/2-1}].app[0].nodeType = "EVSE"
**.node[${numNodes/2}..].app[0].nodeType = "EV"

[Config HighDensity]
description = "High density scenario with many nodes"
extends = Base
*.numNodes = ${numNodes = 50, 100}

# Increased timeout for high density
**.node[*].app[0].slacProcTimeout = 20.0s
**.node[*].app[0].slacMaxRetry = 5

[Config LowLatency]
description = "Low latency scenario with optimized parameters"
extends = Base

# Optimized SLAC timing
**.node[*].app[0].slacMsgTimeout = 0.5s
**.node[*].app[0].slacRetryBackoff = 0.2s

# Optimized MAC parameters
**.node[*].ieee1901Interface.mac.maxBackoffStage = 3
**.node[*].ieee1901Interface.mac.retryLimit = 2

[Config HighNoise]
description = "High noise environment scenario"
extends = Base

# Increased background noise
*.plcRadioMedium.backgroundNoise.power = -80dBm

# More robust parameters
**.node[*].app[0].slacMaxRetry = 5
**.node[*].ieee1901Interface.mac.retryLimit = 5

[Config FastCharging]
description = "Fast charging scenario with higher data rates"
extends = Base

# Higher PHY data rate
**.node[*].ieee1901Interface.phy.transmitter.bitrate = 100Mbps
**.node[*].ieee1901Interface.phy.transmitter.power = 50mW

[Config GridScale]
description = "Grid-scale deployment scenario"
extends = Base
*.numNodes = ${numNodes = 200, 500}

# Extended timeouts for large scale
**.node[*].app[0].slacProcTimeout = 30.0s
**.node[*].app[0].slacMaxRetry = 7

# Reduced logging for performance
**.cmdenv-log-level = WARN
**.log-level = WARN
record-eventlog = false

[Config Debug]
description = "Debug configuration with detailed logging"
extends = Base
*.numNodes = 3

# Detailed logging
**.cmdenv-log-level = TRACE
**.log-level = TRACE
record-eventlog = true

# Extended simulation time for debugging
sim-time-limit = 60s
