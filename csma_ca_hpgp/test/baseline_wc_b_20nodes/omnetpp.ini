[General]
network = csma_ca_hpgp.SimpleNetworkNoChannel
sim-time-limit = 120s

# Load project NEDs
ned-path = .:../..

# Output files
output-scalar-file = results/baseline_wc_b_20nodes_${configname}.sca
output-vector-file = results/baseline_wc_b_20nodes_${configname}.vec

[Config Baseline_WC_B_Simultaneous_SLAC_20nodes]
description = "Baseline WC-B: Simultaneous SLAC burst (œÅ=1.0, collision storm) - 20 nodes"
*.numNodes = 20

# Scenario parameter
*.node[*].hpgpMac.scenario = "WC_B_Simultaneous"

# Run configuration
repeat = 50

# Channel configuration - MAC+Channel (realistic channel effects)
*.channelManager.per = 1e-3
*.channelManager.impulseNoiseEnabled = true
*.channelManager.ispBusyEnabled = true
*.channelManager.impulseDuration = 1ms
*.channelManager.ispBusyProbability = 0.1
*.channelManager.ispBusyMeanDuration = 2ms

# MAC parameters for aggressive CAP3
*.node[*].mac.priorityGroup = "CA23"
*.node[*].mac.bpcMax = 4

# SLAC application parameters (now in HpgpMac)
*.node[*].hpgpMac.nodeType = ${nodeType=EV}
*.node[*].hpgpMac.nodeId = ${nodeId=0}

# SLAC timing parameters (aggressive for continuous occupancy)
*.node[*].hpgpMac.slacMsgTimeout = 10ms
*.node[*].hpgpMac.slacProcTimeout = 100ms
*.node[*].hpgpMac.slacMaxRetry = 5
*.node[*].hpgpMac.slacRetryBackoff = 1ms

# DC loop parameters - enable for all 20 nodes
*.node[*].hpgpMac.dcLoopEnabled = true
*.node[*].hpgpMac.dcPeriod = 100ms
*.node[*].hpgpMac.dcDeadline = 100ms
*.node[*].hpgpMac.dcRspDelay = 1.5ms
*.node[*].hpgpMac.dcRspJitter = 0ms

# Logging parameters
*.node[*].hpgpMac.recordTxAttempts = true
*.node[*].hpgpMac.recordCollisions = true
*.node[*].hpgpMac.recordSlacMessages = true
*.node[*].hpgpMac.recordDcCycles = true

# Statistics recording
*.node[*].hpgpMac.dcCycle:vector = true
*.node[*].hpgpMac.slacAttempt:vector = true
*.node[*].hpgpMac.txAttempt:vector = true
*.node[*].hpgpMac.collision:vector = true

# SLAC detailed parameters for continuous flow
*.node[*].hpgpMac.nStartAtten = 3
*.node[*].hpgpMac.nMsound = 3
*.node[*].hpgpMac.gapStart = 1ms
*.node[*].hpgpMac.gapMsound = 1ms
*.node[*].hpgpMac.delayEvseRsp = 1ms
*.node[*].hpgpMac.gapAttn = 1ms
*.node[*].hpgpMac.gapMatch = 1ms

# Simultaneous SLAC timing - all nodes start at same time
*.node[*].slacApp.startJitter = 0ms

# EVSE configuration
*.node[0].slacApp.nodeType = "EVSE"
*.node[0].slacApp.nodeId = 0

# Enable detailed logging
*.node[*].hpgpMac.recordSlacMessages = true
*.node[*].hpgpMac.recordDcCycles = true
*.node[*].mac.recordTxAttempts = true
*.node[*].mac.recordCollisions = true

# Statistics recording
**.HpgpMac.txAttempts.record = true
**.HpgpMac.txSuccess.record = true
**.HpgpMac.txCollision.record = true
**.HpgpMac.txDrop.record = true
**.ChannelManager.mediumBusy.record = true
**.ChannelManager.collisionCount.record = true
