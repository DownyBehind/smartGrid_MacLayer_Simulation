[General]
network = csma_ca_hpgp.SimpleNetworkNoChannel
sim-time-limit = 120s

# Load project NEDs
ned-path = .:../..

# Output files
output-scalar-file = results/baseline_wc_b_${configname}.sca
output-vector-file = results/baseline_wc_b_${configname}.vec

[Config Baseline_WC_B_Simultaneous_SLAC]
description = "Baseline WC-B: Simultaneous SLAC burst (ρ=1.0, collision storm)"
*.numNodes = 3

# Scenario parameter
*.node[*].hpgpMac.scenario = "WC_B_Simultaneous"

# Run configuration
repeat = 50

# Channel configuration - MAC+Channel (realistic channel effects)
*.channelManager.per = 1e-3
*.channelManager.impulseNoiseEnabled = true
*.channelManager.ispBusyEnabled = true
*.channelManager.impulseDuration = 1ms
*.channelManager.ispBusyProbability = 0.1
*.channelManager.ispBusyMeanDuration = 2ms

# MAC parameters for aggressive CAP3 with collision maximization
*.node[*].mac.priorityGroup = "CA23"
*.node[*].mac.bpcMax = 4

# SLAC application parameters
*.node[*].app[0].typename = "csma_ca_hpgp.SlacApp"
*.node[*].app[0].nodeType = ${nodeType=EV}
*.node[*].app[0].nodeId = ${nodeId=0}

# SLAC timing parameters (aggressive for collision storm)
*.node[*].app[0].slacMsgTimeout = 10ms
*.node[*].app[0].slacProcTimeout = 100ms
*.node[*].app[0].slacMaxRetry = 5
*.node[*].app[0].slacRetryBackoff = 1ms

# DC loop parameters
*.node[*].hpgpMac.dcLoopEnabled = true
*.node[*].hpgpMac.dcPeriod = 100ms
*.node[*].hpgpMac.dcDeadline = 100ms
*.node[*].hpgpMac.dcRspDelay = 1.5ms
*.node[*].hpgpMac.dcRspJitter = 0ms

# Logging parameters
*.node[*].hpgpMac.recordTxAttempts = true
*.node[*].hpgpMac.recordCollisions = true
*.node[*].hpgpMac.recordSlacMessages = true
*.node[*].hpgpMac.recordDcCycles = true

# Statistics recording
*.node[*].hpgpMac.dcCycle:vector = true
*.node[*].hpgpMac.slacAttempt:vector = true
*.node[*].hpgpMac.txAttempt:vector = true
*.node[*].hpgpMac.collision:vector = true

# SLAC detailed parameters for collision maximization
*.node[*].app[0].nStartAtten = 3
*.node[*].app[0].nMsound = 3
*.node[*].app[0].gapStart = 0.5ms  # Shorter gaps for more collisions
*.node[*].app[0].gapMsound = 0.5ms
*.node[*].app[0].delayEvseRsp = 0.5ms
*.node[*].app[0].gapAttn = 0.5ms
*.node[*].app[0].gapMatch = 0.5ms

# Simultaneous SLAC timing - all nodes start at exactly the same time
*.node[*].app[0].startJitter = 0ms  # All start simultaneously (ρ=1.0)

# EVSE configuration
*.node[0].app[0].nodeType = "EVSE"
*.node[0].app[0].nodeId = 0

# Enable detailed logging
*.node[*].app[0].recordSlacMessages = true
*.node[*].app[0].recordDcCycles = true
*.node[*].mac.recordTxAttempts = true
*.node[*].mac.recordCollisions = true

# Statistics recording
**.SlacApp.slacCompletionTime.record = true
**.SlacApp.dcTimeout.record = true
**.SlacApp.dcGapViolation.record = true
**.HpgpMac.txAttempts.record = true
**.HpgpMac.txSuccess.record = true
**.HpgpMac.txCollision.record = true
**.ChannelManager.mediumBusy.record = true
**.ChannelManager.collisionCount.record = true
